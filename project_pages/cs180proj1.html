<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS180: Project 1</title>
    <link rel="stylesheet" href="projtype1.css" link>
    <link rel="icon" href="/images/layout.png">
</head>
<body>
    <div class="grid-container">
        <div class="grid1">
            <a href="/projects.html">
                <p><<< Back to
                    <br/>Projects Page
                </p>
            </a>
        </div>
        <div class="grid2">
            CS 180 Project 1
        </div>
        <div class="grid3">
            <p>Images of the Russian Empire
            </p>
        </div>
        <div class="grid4">
            <img src="/images/cathedral_rshift_(12, 3)_gshift_(5, 2).jpg" style="width:400px">
            <div>
                <p>cathedral.jpg</p>
                <p>Shifts -- Red: (12, 3)  Green: (5, 2)</p>
            </div>
            <img src="/images/monastery(3, 2)_gshift_(-3, 2).jpg" style="width:400px">
            <div>
                <p>monastery.jpg</p>
                <p>Shifts -- Red: (3, 2)  Green: (-3, 2)</p>
            </div>
            <img src="/images/tobolsk_rshift_(6, 3)_gshift_(3, 3).jpg" style="width:400px">
            <div>
                <p>tobolsk.jpg</p>
                <p>Shifts -- Red: (6, 3)  Green: (3, 3)</p>

            </div>
            <img src="/images/church_rshift_(58, -4)_gshift_(25, 4).tif" style="width:400px">
            <div>
                <p>church.jpg</p>
                <p>Shifts -- Red: (58, -4)  Green: (25, 4)</p>

            </div>
            <img src="/images/emir_rshift_(103, 55)_gshift_(49, 24).jpg" style="width:400px">
            <div>
                <p>emir.tif</p>
                <p>Shifts -- Red: (103, 55)  Green: (49, 24)</p>

            </div>
            <img src="/images/harvesters_rshift_(124, 13)_gshift_(59, 16).jpg" style="width:400px">
            <div>
                <p>harvesters.tif</p>
                <p>Shifts -- Red: (124, 13)  Green: (59, 16)</p>

            </div>
            <img src="/images/icon_rshift_(89, 23)_gshift_(41, 17).jpg" style="width:400px">
            <div>
                <p>icon.tif</p>
                <p>Shifts -- Red: (89, 23)  Green: (41, 17)</p>
            </div>
            <img src="/images/italil_rshift_(76, 35)_gshift_(38, 21).jpg" style="width:400px">
            <div>
                <p>italil.tif</p>
                <p>Shifts -- Red: (76, 35)  Green: (38, 21)</p>

            </div>
            <img src="/images/lastochikino_rshift_(75, -8)_gshift_(-2, -2).jpg" style="width:400px">
            <div>
                <p>lastochikino.tif</p>
                <p>Shifts -- Red: (75, -8)  Green: (-2, -2)</p>
            </div>
            <img src="/images/lugano_rshift_(92, -29)_gshift_(41, -16).jpg" style="width:400px">
            <div>
                <p>lugano.tif</p>
                <p>Shifts -- Red: (92, -29)  Green: (41, -16)</p>

            </div>
            <img src="/images/melons_rshift_(135, 11)_gshift_(81, 10).jpg" style="width:400px">
            <div>
                <p>melons.tif</p>
                <p>Shifts -- Red: (135, 11)  Green: (81, 10)</p>

            </div>
            <img src="/images/self_portrait_rshift_(135, 33)_gshift_(78, 29).jpg" style="width:400px">
            <div>
                <p>self_portrait.tif</p>
                <p>Shifts -- Red: (135, 33)  Green: (78, 29)</p>

            </div>
            <img src="/images/siren_rshift_(95, -25)_gshift_(49, -6).jpg" style="width:400px">
            <div>
                <p>siren.tif</p>
                <p>Shifts -- Red: (95, -25)  Green: (49, -6)</p>

            </div>
            <img src="/images/three_generations_rshift_(112, 11)_gshift_(53, 14).jpg" style="width:400px">
            <div>
                <p>three_generations.tif</p>
                <p>Shifts -- Red: (112, 11)  Green: (53, 14)</p>
            </div>
            <img src="/images/kyrm_rshift_(14, -3)_gshift_(3, -1).jpg" style="width:400px">
            <div>
                <p>kyrm.jpg</p>
                <p>Shifts -- Red: (14, -3)  Green: (3, -1)</p>
            </div>
            <img src="/images/logs_rshift_(12, 2)_gshift_(5, 2).jpg" style="width:400px">
            <div>
                <p>logs.jpg</p>
                <p>Shifts -- Red: (12, 2)  Green: (5, 2)</p>
            </div>
            <img src="/images/vase_rshift_(11, 0)_gshift_(2, 0).jpg" style="width:400px">
            <div>
                <p>vase.jpg</p>
                <p>Shifts -- Red: (11, 0)  Green: (2, 0)</p>
            </div>
            <img src="/images/woman_rshift_(11, 6)_gshift_(5, 4).jpg" style="width:400px">
            <div>
                <p>woman.jpg</p>
                <p>Shifts -- Red: (11, 6)  Green: (5, 4)</p>
            </div>
        </div>
        <div class="grid5">
            <p>Overview</p>
            <p>
                The goal of this project was to reconstruct the colored version of photographs from 
                the Prokudin-Gorskii collection. Each photo in question consists of 3, black-and-white panels of the same 
                scene. Each of these panels utilize one of three different color filters: red, green, or blue. 
                In order to reconstruct the full colored images, the filtered panels/channels needed to be properly aligned
                and layered. 
            </p>
            <p>
                On the left of this page, I've displayed the colorized images along with the shifts
                applied to the red and green filtered channels for alignment with the blue channel. The last 4 images were
                the ones of my own choosing. 
            </p>
            <p>Implementation</p>
            <p>
                The first aspect of my implementation was using an exhastive search over all possible horizontal and vertical pixel shifts 
                within a defined window (ie. [-15, 15] pixels). Each shift's alignment was evaluated using the calculated euclidean distance (L2 norm)
                between the red/green channel and blue channel. The shift that resulted in the minimum L2 norm score was taken as the one with the best alignment. 
                This brute force method performed effectively for the low-resolution, jpg images. 
            </p>
            <p>
                However, brute force performed much too slowly for the higher resolution, tif images, thus requiring a better approach. 
                I implemented a recursive image pyramid search algorithm. This algorithm would recursively shrink the images by a fact of 2 (keeping track of the overall shrinkage from the original image size)
                until the defined recursion depth was reached, or the image became small enough to be handled by the exhaustive alignment function. 
                The shift calculated from the downsized images would then be scaled up by a factor of (2^recursion depth reached), and the original image would use this shift as a starting point for 
                another round of exhaustive searching on the original, large image. 
            </p>
            <p>
                Problems Encountered
            </p>
            <p>
                The biggest issue I had encountered during this projects implementation was dealing with the image borders. Writing the exhaustive algorithm was 
                pretty straigtforward, but my images were still slightly misaligned. After some closer examination (and a scroll through EdStem) I concluded that the burnt 
                borders of the images were affecting the accuracy of my L2 norm scores. To combat this, I wrote a cropping function that both seperated each photo series into thirds, 
                and also cropped the edges of each third by 10%. Doing this cropping resulted in significantly better alignment amongst my colorized photos. 
            </p>
            <p>
                Another minor issue I encountered had to do with my recursive image pyramid-ing. My alignments kept being slightly off because when I was rescaling the shift calculated from the 
                downsized images, I wasn't rescaling it by the correct scale factor. After some code examination, I recognized the problem and recalculated by scaling factor. 
            </p>
        </div>
        <div class="grid6"></div>
    </div>
</body>

</html>
